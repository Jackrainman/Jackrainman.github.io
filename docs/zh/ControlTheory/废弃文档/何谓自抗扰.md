[何谓自抗扰？_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV124411f7CU/)

我们必须承认一个事实：一个物体内部扰动和外部扰动都会对物体的状态产生变化，自抗扰解决的就是不确定性问题

韩京清教授提出的最早的 **“自抗扰控制器”** （ADRC）框架如图，总共有三个  ，

二阶 TD 说明我们需要给控制器安排 **过渡过程** ，指令和微分都需要给控制器，指令应当是光滑的，这样能让被控对象随时随刻地跟踪指令，是ADRC的框架之一。

三阶 **状态观测器** （ESO）主要作用是将 $F$ （总扰动）实时地估计出来，这样即使没有模型，我们把F的值估计出来，然后用输入把它抵消掉，这样我们就能让系统接近理想对象，输入和输出就是纯积分的关系
比如：路程的积分是速度，速度的积分是加速度，电感的积分是……

那么为什么是三阶 ESO 而不是二阶？因为系统需要升阶

非线性组合：反馈控制器 **不一定** 是类似 PID 的线性组合，原始的 ADRC包括三个部分

![](../Pictures/LADRC战队实战指南/LADRC-中文.png)


自抗扰控制有三个关键概念：积分器串联型，总扰动，扩张状态观测器
积分器串联型：韩老师 1979 年提出的理念：无论系统是否线性，在一定条件下都可以回归于积分器串联型，这样所有控制都只需要转化积分串联型就可以 “一套研究处处用” 了。⭐关键概念
总扰动：如何让系统对不确定性不敏感，甚至完全化为理想的，完全无扰的对象，大部分对象都可以看为积分器串联型和总扰动，这样我们就可以将总扰动从输入/输出中提取出来，用控制信号将其抵消掉，剩下的就是无扰对象。
这样，我们只需要研究 不确定 → 确定，被扰 → 无扰即可。
也可以简单不严谨地理解为“两个自由度”，有内环和外环，内环抵消被控对象的不确定性（移出内环），这叫去扰器（rejector），有了去扰器，我们就能更方便，不考虑太多地设计控制器了（controller）

![](Pictures/何谓自抗扰/file-20260205222748622.png)



![](Pictures/何谓自抗扰/file-20260205231513428.png)
在学术研究中，我们通常假设系统是**线性定常**的，理论上假设 $a_1, a_0$ 等参数是准确已知的固定常数，但是在实际工程中，这部分往往是**不确定的、非线性的**，且带有**实变干扰** $D$（即$f(y, \dot{y}, d, t)$ 部分）。面对这种不确定性，ADRC的破局方法是 **“化繁为简”** ：
通过**实时估计与补偿** ，实时估算出这个复杂的总扰动 $F$，并将其加入控制信号中进行抵消；
抵消后，原系统会从一个复杂的非线性方程，简化为一个几乎理想的**积分器串联型**系统，即 $\ddot{y} \approx b u_0$；
**补偿公式** 则是 $u = u_0 - \frac{\hat{f}}{b}$，通过这种方式，我们把控制问题变简单了。
为了“揪出”那个看不见的 $f$，我们需要使用 **线性扩张状态观测器 (LESO)** ：LESO 相比 ESO 在工程上更容易实现；
而**状态扩张（升维）** 则意为：常规观测器只关注状态 $x_1$（位移）和 $x_2$（速度），并将总扰动 $f$ 定义为一个新的状态变量 $x_3 = f$，从而将系统扩展为**三阶状态方程**。
只要这个三阶观测器的参数设计合理，我们就能通过输出 $y$ 准确估算出这三个量，特别是用于消除干扰的 $z_3 \approx f$。
为什么为什么定义 $x_3 = f$ 就能把它算出来？视频中提到的“建立罗恩博格尔状态观测器”其实利用了**反馈修正机制**：
- 我们构建一个数学模型来模拟物理世界的 $x_1, x_2, x_3$。
- 模型输出的 $z_1$ 会与实际测得的 $y$ 进行对比。
- 如果 $z_1 \neq y$，说明我们对扰动 $z_3$ 的估算不对。
- 这个**误差 $(z_1 - y)$** 会像反馈控制一样，不断修正 $z_3$ 的值，直到模型和现实吻合。

以下是一个自抗扰设计的范式：
**1、过程动态 (Process Dynamics)**

$$\ddot{y} = \underbrace{(-a_1\dot{y} - a_0y + d)}_{f(y, \dot{y}, d, t)} + bu$$

**详细讲解：**

- 这是一个二阶系统。
- **$y$**: 系统的输出（如位置）。
- **$\dot{y}, \ddot{y}$**: 输出的一阶导数（速度）和二阶导数（加速度）。
- **$u$**: 控制输入。
- **$d$**: 外部扰动。
- **$a_1, a_0, b$**: 系统参数。
    
- **关键点**：ADRC 的核心思想是将系统内部的未知动态（$-a_1\dot{y} - a_0y$）和外部扰动（$d$）合并定义为一个**“总扰动” (Total Disturbance)**，用符号 $f(y, \dot{y}, d, t)$ 表示。这样，系统就被简化为 $\ddot{y} = f + bu$

 **2、设计原则 (Design Principle)**

这一部分我们将讲解如何利用控制律将非线性、有扰动的系统转化为简单的积分串联系统。
$$\ddot{y} = f(y, \dot{y}, d, t) + bu \xrightarrow{u = u_0 - \frac{\hat{f}}{b}, \quad \hat{f} \approx f} \ddot{y} \approx b u_0$$
**状态空间方程形式：**
$$\ddot{y} = f(y, \dot{y}, w, t) + bu \quad \Rightarrow \quad \begin{cases} \dot{x}_1 = x_2 \\ \dot{x}_2 = x_3 + bu \\ \dot{x}_3 = \dot{f} \\ y = x_1 \end{cases}$$

其中定义状态变量：$x_1 = y, \quad x_2 = \dot{y}, \quad x_3 = f(y, \dot{y}, w, t)$。

**详细讲解：**

- **补偿策略**：如果我们能得到总扰动 $f$ 的估计值 $\hat{f}$，我们就可以设计控制律 $u = u_0 - \frac{\hat{f}}{b}$。
    
- **对消效果**：将该控制律代入原方程，$\hat{f}$ 和 $f$ 相互抵消，系统变为 $\ddot{y} \approx bu_0$。这意味着原本复杂的非线性系统被转化为了一个简单的“伪线性系统”（积分器串联型），极大简化了控制器的设计。
    
- **扩张状态 (Extended State)**：为了估计 $f$，我们将其定义为一个新的状态变量 $x_3$。这就是“扩张状态”名称的由来——把扰动看作系统的第三个状态。

LADRC的阶数是未知的还是已知的？根据你要控制的对象就能知道是几阶的。

准确来说，LADRC 的阶数取决于被控对象中**输出量 $y$ 对输入量 $u$ 的最高阶导数**（也称为系统的相对阶）。观察 **微分方程** 左侧最高阶的导数项。例如：如果你看到的方程是 $\ddot{y} = f + bu$，这是 **2 阶系统**。
在视频中 19 分钟左右处，教授的系统是四阶的，那么就需要五阶的扩张观测器
**物理本质** 能帮助我们更好理解：阶数代表了控制信号 $u$ 需要经过多少次累积（积分）才能影响到最终的输出 $y$。
ADRC “扩张”思想的精髓在于：**$n$ 阶系统，必配 $n+1$ 阶观测器**。而多出来的那个就是 **“总扰动”** 。
- **状态变量的组成：**
    - **前 $n$ 个状态：** 用于追踪系统本身的变量。对于 4 阶系统，我们需要追踪 $y, \dot{y}, \ddot{y}, \dddot{y}$，这就是 $x_1$ 到 $x_4$。
    - **第 $n+1$ 个状态（扩张状态）：** 这是 ADRC 的神来之笔。我们将所有的未知扰动、未建模动态统统打包成“总扰动” $f$，并定义为一个额外的状态变量 $x_5 = f$。
    
- **结论：** 观测器必须同时观测出系统的原生状态（n个）和那个被“揪出来”的总扰动（1个），所以总共需要 **n+1 阶**。

那么如何计算公式？
####  1、状态扩张方程

将 4 阶物理系统改写为 5 阶状态空间形式：

$$\begin{cases} \dot{x}_1 = x_2 \\ \dot{x}_2 = x_3 \\ \dot{x}_3 = x_4 \\ \dot{x}_4 = x_5 + bu \\ \dot{x}_5 = \dot{f} \end{cases}$$

#### 2、 观测器增益 $L$ 的计算

在截图的右下角表格中，展示了观测器增益 $l_1$ 到 $l_5$ 的计算方法。为了简化调试，我们通常将观测器的所有极点都配置在 $-\omega_o$ 处（$\omega_o$ 为观测器带宽）：

- **计算依据：** 对应特征多项式 $(s + \omega_o)^5$ 的系数。
    
- **公式示例：**
    
    - $l_1 = 5\omega_o$
        
    - $l_2 = 10\omega_o^2$（注：若系统本身含已知项 $a_2$，则需加上该修正项）
        
    - ...以此类推，直到 $l_5 = \omega_o^5$。